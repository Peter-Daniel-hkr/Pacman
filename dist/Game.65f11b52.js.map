{"version":3,"sources":["js/Input.js","js/Sound.js","js/Pacman.js","js/Ghost.js","js/TileMap.js","js/Game.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["MovingDirection","up","down","left","right","Sound","eatDotSound","Audio","powerDotSound","eatGhostSound","gameOverSound","gameWinSound","Pacman","x","y","tileSize","speed","tileMap","event","keyCode","currentMovingDirection","requestedMovingDirection","madeFirstMove","pacmanAnimationTimerDefault","pacmanAnimationTimer","pacmanRotation","Rotation","powerDotActive","powerDotAboutToExpire","timers","document","addEventListener","score","highScore","undefined","dom_score","querySelector","ctx","pause","ghosts","size","save","translate","rotate","Math","PI","drawImage","pacmanImages","pacmanImageIndex","restore","JSON","parse","localStorage","getItem","setItem","stringify","pacmanImage1","Image","src","pacmanImage2","pacmanImage3","Number","isInteger","didCollideWithEnvironment","length","eatDot","innerHTML","updateHighScore","play","eatPowerDot","forEach","timer","clearTimeout","powerDotTimer","setTimeout","push","powerDotAboutToExpireTimer","collideGhosts","filter","ghost","collideWith","splice","indexOf","Ghost","movingDirection","floor","random","Object","keys","directionTimerDefault","directionTimer","scaredAboutToExpireTimerDefault","scaredAboutToExpireTimer","pacman","image","normalGhost","scaredGhost","scaredGhost2","newMoveDirection","min","max","TileMap","yellowDot","pinkDot","wall","powerDot","powerDotAnmationTimerDefault","powerDotAnmationTimer","row","gameMap","column","tile","canvas","width","height","direction","nextColumn","nextRow","fillStyle","fillRect","flat","getElementById","getContext","GAME_OVER","YOU_WON","YOU_LOSE","restart","soundElement","getPacman","getGhosts","gameOver","gameWin","gameLoop","draw","drawGameEnd","checkGameOver","checkGameWin","didWin","isGameOver","some","showYouWon","drawHighScore","showYouLose","setCanvasSize","setInterval","audioManager","imgSrc","getAttribute","SOUND_IMG","setAttribute","console","log","muted","location","reload","style","display","gradient","createLinearGradient","addColorStop","textAlign","font","fillText","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","cb"],"mappings":"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","file":"Game.65f11b52.js","sourceRoot":"..","sourcesContent":["const MovingDirection = {\r\n  up: 0,\r\n  down: 1,\r\n  left: 2,\r\n  right: 3,\r\n};\r\n\r\nexport default MovingDirection;\r\n","const Sound = {\r\n  eatDotSound: new Audio(\"sounds/eat_dot.wav\"),\r\n  powerDotSound: new Audio(\"sounds/power_dot.wav\"),\r\n  eatGhostSound: new Audio(\"sounds/eat_ghost.wav\"),\r\n  gameOverSound: new Audio(\"sounds/game_over.wav\"),\r\n  gameWinSound: new Audio(\"sounds/game_win.wav\"),\r\n};\r\n\r\nexport default Sound;\r\n","import MovingDirection from \"./Input.js\";\r\nimport Sound from \"./Sound.js\";\r\n\r\nexport default class Pacman {\r\n  constructor(x, y, tileSize, speed, tileMap) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.tileSize = tileSize;\r\n    this.speed = speed;\r\n    this.tileMap = tileMap;\r\n\r\n    this.currentMovingDirection = null;\r\n    this.requestedMovingDirection = null;\r\n\r\n    this.pacmanAnimationTimerDefault = 10;\r\n    this.pacmanAnimationTimer = null;\r\n\r\n    this.pacmanRotation = this.Rotation.right;\r\n\r\n    this.powerDotActive = false;\r\n    this.powerDotAboutToExpire = false;\r\n    this.timers = [];\r\n\r\n    this.madeFirstMove = false;\r\n\r\n    document.addEventListener(\"keydown\", this.#keydown); // keyboard input\r\n\r\n    this.#loadPacmanImages();\r\n\r\n    //  score logic\r\n    this.score = 0;\r\n    this.highScore = undefined;\r\n    this.dom_score = document.querySelector(\"#score\");\r\n  }\r\n\r\n  Rotation = {\r\n    right: 0,\r\n    down: 1,\r\n    left: 2,\r\n    up: 3,\r\n  };\r\n\r\n  draw(ctx, pause, ghosts) {\r\n    if (!pause) {\r\n      this.#move();\r\n      this.#animate();\r\n    }\r\n    this.#eatDot();\r\n    this.#eatPowerDot();\r\n    this.#eatGhost(ghosts);\r\n\r\n    const size = this.tileSize / 2;\r\n    ctx.save();\r\n    ctx.translate(this.x + size, this.y + size);\r\n    ctx.rotate((this.pacmanRotation * 90 * Math.PI) / 180);\r\n    ctx.drawImage(\r\n      this.pacmanImages[this.pacmanImageIndex],\r\n      -size,\r\n      -size,\r\n      this.tileSize,\r\n      this.tileSize\r\n    );\r\n\r\n    ctx.restore();\r\n  }\r\n\r\n  #loadPacmanImages() {\r\n    const pacmanImage1 = new Image();\r\n    pacmanImage1.src = \"/images/pac0.png\";\r\n\r\n    const pacmanImage2 = new Image();\r\n    pacmanImage2.src = \"/images/pac1.png\";\r\n\r\n    const pacmanImage3 = new Image();\r\n    pacmanImage3.src = \"/images/pac2.png\";\r\n\r\n    this.pacmanImages = [\r\n      pacmanImage1,\r\n      pacmanImage2,\r\n      pacmanImage3,\r\n      pacmanImage2,\r\n    ];\r\n\r\n    this.pacmanImageIndex = 0;\r\n  }\r\n\r\n  // Legend: Keycode >> 37 = Left arrow; 38 = up arrow; 39 = right arrow; 40 = down arrow;\r\n  #keydown = (event) => {\r\n    if (event.keyCode == 37) {\r\n      if (this.currentMovingDirection == MovingDirection.right)\r\n        this.currentMovingDirection = MovingDirection.left;\r\n      this.requestedMovingDirection = MovingDirection.left;\r\n      this.madeFirstMove = true;\r\n    }\r\n\r\n    if (event.keyCode == 38) {\r\n      if (this.currentMovingDirection == MovingDirection.down)\r\n        this.currentMovingDirection = MovingDirection.up;\r\n      this.requestedMovingDirection = MovingDirection.up;\r\n      this.madeFirstMove = true;\r\n    }\r\n\r\n    if (event.keyCode == 39) {\r\n      if (this.currentMovingDirection == MovingDirection.left)\r\n        this.currentMovingDirection = MovingDirection.right;\r\n      this.requestedMovingDirection = MovingDirection.right;\r\n      this.madeFirstMove = true;\r\n    }\r\n\r\n    if (event.keyCode == 40) {\r\n      if (this.currentMovingDirection == MovingDirection.up)\r\n        this.currentMovingDirection = MovingDirection.down;\r\n      this.requestedMovingDirection = MovingDirection.down;\r\n      this.madeFirstMove = true;\r\n    }\r\n  };\r\n\r\n  #move() {\r\n    if (this.currentMovingDirection !== this.requestedMovingDirection) {\r\n      if (\r\n        Number.isInteger(this.x / this.tileSize) &&\r\n        Number.isInteger(this.y / this.tileSize)\r\n      ) {\r\n        if (\r\n          !this.tileMap.didCollideWithEnvironment(\r\n            this.x,\r\n            this.y,\r\n            this.requestedMovingDirection\r\n          )\r\n        )\r\n          this.currentMovingDirection = this.requestedMovingDirection;\r\n      }\r\n    }\r\n\r\n    if (\r\n      this.tileMap.didCollideWithEnvironment(\r\n        this.x,\r\n        this.y,\r\n        this.currentMovingDirection\r\n      )\r\n    ) {\r\n      this.pacmanAnimationTimer = null;\r\n      this.pacmanImageIndex = 1;\r\n      return;\r\n    } else if (\r\n      this.currentMovingDirection != null &&\r\n      this.pacmanAnimationTimer == null\r\n    ) {\r\n      this.pacmanAnimationTimer = this.pacmanAnimationTimerDefault;\r\n    }\r\n\r\n    switch (this.currentMovingDirection) {\r\n      case MovingDirection.up:\r\n        this.y -= this.speed;\r\n        this.pacmanRotation = this.Rotation.up;\r\n        break;\r\n      case MovingDirection.down:\r\n        this.y += this.speed;\r\n        this.pacmanRotation = this.Rotation.down;\r\n        break;\r\n      case MovingDirection.left:\r\n        this.x -= this.speed;\r\n        this.pacmanRotation = this.Rotation.left;\r\n        break;\r\n      case MovingDirection.right:\r\n        this.x += this.speed;\r\n        this.pacmanRotation = this.Rotation.right;\r\n        break;\r\n    }\r\n  }\r\n\r\n  #animate() {\r\n    if (this.pacmanAnimationTimer == null) {\r\n      return;\r\n    }\r\n    this.pacmanAnimationTimer--;\r\n    if (this.pacmanAnimationTimer == 0) {\r\n      this.pacmanAnimationTimer = this.pacmanAnimationTimerDefault;\r\n      this.pacmanImageIndex++;\r\n      if (this.pacmanImageIndex == this.pacmanImages.length)\r\n        this.pacmanImageIndex = 0;\r\n    }\r\n  }\r\n\r\n  #eatDot() {\r\n    if (this.tileMap.eatDot(this.x, this.y) && this.madeFirstMove) {\r\n      this.score += 1;\r\n      this.dom_score.innerHTML = `${this.score}`;\r\n      this.updateHighScore();\r\n      Sound.eatDotSound.play();\r\n    }\r\n  }\r\n\r\n  #eatPowerDot() {\r\n    if (this.tileMap.eatPowerDot(this.x, this.y)) {\r\n      this.score += 10;\r\n      this.dom_score.innerHTML = `${this.score}`;\r\n      this.updateHighScore();\r\n      Sound.powerDotSound.play();\r\n      this.powerDotActive = true;\r\n      this.powerDotAboutToExpire = false;\r\n      this.timers.forEach((timer) => clearTimeout(timer));\r\n      this.timers = [];\r\n\r\n      let powerDotTimer = setTimeout(() => {\r\n        this.powerDotActive = false;\r\n        this.powerDotAboutToExpire = false;\r\n      }, 1000 * 6);\r\n\r\n      this.timers.push(powerDotTimer);\r\n\r\n      let powerDotAboutToExpireTimer = setTimeout(() => {\r\n        this.powerDotAboutToExpire = true;\r\n      }, 1000 * 3);\r\n\r\n      this.timers.push(powerDotAboutToExpireTimer);\r\n    }\r\n  }\r\n\r\n  #eatGhost(ghosts) {\r\n    if (this.powerDotActive) {\r\n      const collideGhosts = ghosts.filter((ghost) => ghost.collideWith(this));\r\n      collideGhosts.forEach((ghost) => {\r\n        ghosts.splice(ghosts.indexOf(ghost), 1);\r\n        this.score += 50;\r\n        this.dom_score.innerHTML = `${this.score}`;\r\n        this.updateHighScore();\r\n        Sound.eatGhostSound.play();\r\n      });\r\n    }\r\n  }\r\n\r\n  updateHighScore() {\r\n    this.highScore = JSON.parse(localStorage.getItem(\"High Score\"));\r\n    this.highScore ? null : (this.highScore = this.score);\r\n    this.highScore > this.score\r\n      ? (this.highScore = this.highScore)\r\n      : (this.highScore = this.score);\r\n    localStorage.setItem(\"High Score\", JSON.stringify(this.highScore));\r\n  }\r\n}\r\n","import MovingDirection from \"./Input.js\";\r\n\r\nexport default class Ghost {\r\n  constructor(x, y, tileSize, speed, tileMap) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.tileSize = tileSize;\r\n    this.speed = speed;\r\n    this.tileMap = tileMap;\r\n\r\n    this.#loadImages();\r\n\r\n    this.movingDirection = Math.floor(\r\n      Math.random() * Object.keys(MovingDirection).length\r\n    );\r\n\r\n    this.directionTimerDefault = this.#random(10, 25);\r\n    this.directionTimer = this.directionTimerDefault;\r\n\r\n    this.scaredAboutToExpireTimerDefault = 10;\r\n    this.scaredAboutToExpireTimer = this.scaredAboutToExpireTimerDefault;\r\n  }\r\n\r\n  draw(ctx, pause, pacman) {\r\n    if (!pause) {\r\n      this.#move();\r\n      this.#changeDirection();\r\n    }\r\n    this.#setImage(ctx, pacman);\r\n  }\r\n\r\n  collideWith(pacman) {\r\n    const size = this.tileSize / 2;\r\n    if (\r\n      this.x < pacman.x + size &&\r\n      this.x + size > pacman.x &&\r\n      this.y < pacman.y + size &&\r\n      this.y + size > pacman.y\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  #setImage(ctx, pacman) {\r\n    if (pacman.powerDotActive) {\r\n      this.#setImageWhenPowerDotIsActive(pacman);\r\n    } else {\r\n      this.image = this.normalGhost;\r\n    }\r\n    ctx.drawImage(this.image, this.x, this.y, this.tileSize, this.tileSize);\r\n  }\r\n\r\n  #setImageWhenPowerDotIsActive(pacman) {\r\n    if (pacman.powerDotAboutToExpire) {\r\n      this.scaredAboutToExpireTimer--;\r\n      if (this.scaredAboutToExpireTimer === 0) {\r\n        this.scaredAboutToExpireTimer = this.scaredAboutToExpireTimerDefault;\r\n        if (this.image === this.scaredGhost) {\r\n          this.image = this.scaredGhost2;\r\n        } else {\r\n          this.image = this.scaredGhost;\r\n        }\r\n      }\r\n    } else {\r\n      this.image = this.scaredGhost;\r\n    }\r\n  }\r\n\r\n  #changeDirection() {\r\n    this.directionTimer--;\r\n    let newMoveDirection = null;\r\n    if (this.directionTimer == 0) {\r\n      this.directionTimer = this.directionTimerDefault;\r\n      newMoveDirection = Math.floor(\r\n        Math.random() * Object.keys(MovingDirection).length\r\n      );\r\n    }\r\n\r\n    if (newMoveDirection != null && this.movingDirection != newMoveDirection) {\r\n      if (\r\n        Number.isInteger(this.x / this.tileSize) &&\r\n        Number.isInteger(this.y / this.tileSize)\r\n      ) {\r\n        if (\r\n          !this.tileMap.didCollideWithEnvironment(\r\n            this.x,\r\n            this.y,\r\n            newMoveDirection\r\n          )\r\n        ) {\r\n          this.movingDirection = newMoveDirection;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  #move() {\r\n    if (\r\n      !this.tileMap.didCollideWithEnvironment(\r\n        this.x,\r\n        this.y,\r\n        this.movingDirection\r\n      )\r\n    ) {\r\n      switch (this.movingDirection) {\r\n        case MovingDirection.up:\r\n          this.y -= this.speed;\r\n          break;\r\n        case MovingDirection.down:\r\n          this.y += this.speed;\r\n          break;\r\n        case MovingDirection.left:\r\n          this.x -= this.speed;\r\n          break;\r\n        case MovingDirection.right:\r\n          this.x += this.speed;\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  #random(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  }\r\n\r\n  #loadImages() {\r\n    this.normalGhost = new Image();\r\n    this.normalGhost.src = \"/images/ghost1.png\";\r\n\r\n    this.scaredGhost = new Image();\r\n    this.scaredGhost.src = \"/images/scaredGhost.png\";\r\n\r\n    this.scaredGhost2 = new Image();\r\n    this.scaredGhost2.src = \"/images/scaredGhost2.png\";\r\n\r\n    this.image = this.normalGhost;\r\n  }\r\n}\r\n","import Pacman from \"./Pacman.js\";\r\nimport Ghost from \"./Ghost.js\";\r\nimport MovingDirection from \"./Input.js\";\r\n\r\nexport default class TileMap {\r\n  constructor(tileSize) {\r\n    this.tileSize = tileSize;\r\n\r\n    this.yellowDot = new Image();\r\n    this.yellowDot.src = \"/images/yellowDot.png\";\r\n    // this.yellowDot.src = \"https://i.ibb.co/vsqT0FR/bonbon.gif\";\r\n\r\n    this.pinkDot = new Image();\r\n    this.pinkDot.src = \"/images/pinkDot.png\";\r\n\r\n    this.wall = new Image();\r\n    this.wall.src = \"/images/wall.png\";\r\n\r\n    this.powerDot = this.pinkDot;\r\n    this.powerDotAnmationTimerDefault = 30;\r\n    this.powerDotAnmationTimer = this.powerDotAnmationTimerDefault;\r\n  }\r\n\r\n  // Legend:>> 0 - dots; 1 - wall; 2 - empty space; 3 - ghost; 4 - pacman; 5 - power pellet\r\n  gameMap = [\r\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n    [1, 3, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 5, 1],\r\n    [1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1],\r\n    [1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1],\r\n    [1, 0, 0, 0, 0, 1, 5, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1],\r\n    [1, 2, 2, 1, 0, 1, 0, 0, 0, 0, 0, 3, 0, 1, 0, 1, 2, 2, 1],\r\n    [1, 1, 1, 1, 0, 1, 0, 1, 1, 2, 1, 1, 0, 1, 0, 1, 1, 1, 1],\r\n    [1, 4, 0, 0, 0, 0, 0, 1, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0, 1],\r\n    [1, 1, 1, 1, 0, 1, 0, 1, 1, 2, 1, 1, 0, 1, 0, 1, 1, 1, 1],\r\n    [1, 2, 2, 1, 0, 1, 0, 3, 0, 0, 0, 0, 0, 1, 0, 1, 2, 2, 1],\r\n    [1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1],\r\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n    [1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1],\r\n    [1, 0, 5, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 5, 0, 1],\r\n    [1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1],\r\n    [1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n    [1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1],\r\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 1],\r\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n  ];\r\n\r\n  draw(ctx) {\r\n    for (let row = 0; row < this.gameMap.length; row++) {\r\n      for (let column = 0; column < this.gameMap[row].length; column++) {\r\n        let tile = this.gameMap[row][column];\r\n        if (tile === 0) {\r\n          this.#drawDot(ctx, column, row, this.tileSize);\r\n        } else if (tile === 1) {\r\n          this.#drawWall(ctx, column, row, this.tileSize);\r\n        } else if (tile == 2) {\r\n          this.#drawBlank(ctx, column, row, this.tileSize);\r\n        } else {\r\n          this.#drawPowerDot(ctx, column, row, this.tileSize);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  #drawDot(ctx, column, row, size) {\r\n    ctx.drawImage(\r\n      this.yellowDot,\r\n      column * this.tileSize,\r\n      row * this.tileSize,\r\n      size,\r\n      size\r\n    );\r\n  }\r\n\r\n  #drawPowerDot(ctx, column, row, size) {\r\n    this.powerDotAnmationTimer--;\r\n    if (this.powerDotAnmationTimer === 0) {\r\n      this.powerDotAnmationTimer = this.powerDotAnmationTimerDefault;\r\n      if (this.powerDot == this.pinkDot) {\r\n        this.powerDot = this.yellowDot;\r\n      } else {\r\n        this.powerDot = this.pinkDot;\r\n      }\r\n    }\r\n    ctx.drawImage(this.powerDot, column * size, row * size, size, size);\r\n  }\r\n\r\n  #drawWall(ctx, column, row, size) {\r\n    ctx.drawImage(\r\n      this.wall,\r\n      column * this.tileSize,\r\n      row * this.tileSize,\r\n      size,\r\n      size\r\n    );\r\n  }\r\n\r\n  #drawBlank(ctx, column, row, size) {\r\n    ctx.fillStyle = \"black\";\r\n    ctx.fillRect(column * this.tileSize, row * this.tileSize, size, size);\r\n  }\r\n\r\n  getPacman(speed) {\r\n    for (let row = 0; row < this.gameMap.length; row++) {\r\n      for (let column = 0; column < this.gameMap[row].length; column++) {\r\n        let tile = this.gameMap[row][column];\r\n        if (tile === 4) {\r\n          // 4 --> pacman\r\n          this.gameMap[row][column] = 0;\r\n          return new Pacman(\r\n            column * this.tileSize,\r\n            row * this.tileSize,\r\n            this.tileSize,\r\n            speed,\r\n            this\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getGhosts(speed) {\r\n    const ghosts = [];\r\n\r\n    for (let row = 0; row < this.gameMap.length; row++) {\r\n      for (let column = 0; column < this.gameMap[row].length; column++) {\r\n        const tile = this.gameMap[row][column];\r\n        if (tile == 3) {\r\n          this.gameMap[row][column] = 0;\r\n          ghosts.push(\r\n            new Ghost(\r\n              column * this.tileSize,\r\n              row * this.tileSize,\r\n              this.tileSize,\r\n              speed,\r\n              this\r\n            )\r\n          );\r\n        }\r\n      }\r\n    }\r\n    return ghosts;\r\n  }\r\n\r\n  setCanvasSize(canvas) {\r\n    canvas.width = this.gameMap[0].length * this.tileSize;\r\n    canvas.height = this.gameMap.length * this.tileSize;\r\n  }\r\n\r\n  didCollideWithEnvironment(x, y, direction) {\r\n    if (direction == null) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      Number.isInteger(x / this.tileSize) &&\r\n      Number.isInteger(y / this.tileSize)\r\n    ) {\r\n      let column = 0;\r\n      let row = 0;\r\n      let nextColumn = 0;\r\n      let nextRow = 0;\r\n\r\n      switch (direction) {\r\n        case MovingDirection.right:\r\n          nextColumn = x + this.tileSize;\r\n          column = nextColumn / this.tileSize;\r\n          row = y / this.tileSize;\r\n          break;\r\n        case MovingDirection.left:\r\n          nextColumn = x - this.tileSize;\r\n          column = nextColumn / this.tileSize;\r\n          row = y / this.tileSize;\r\n          break;\r\n        case MovingDirection.up:\r\n          nextRow = y - this.tileSize;\r\n          row = nextRow / this.tileSize;\r\n          column = x / this.tileSize;\r\n          break;\r\n        case MovingDirection.down:\r\n          nextRow = y + this.tileSize;\r\n          row = nextRow / this.tileSize;\r\n          column = x / this.tileSize;\r\n          break;\r\n      }\r\n      const tile = this.gameMap[row][column];\r\n      if (tile === 1) {\r\n        // if 1, we're colliding with a wall\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  didWin() {\r\n    return this.#dotsLeft() === 0;\r\n  }\r\n\r\n  #dotsLeft() {\r\n    return this.gameMap.flat().filter((tile) => tile === 0).length;\r\n  }\r\n\r\n  eatDot(x, y) {\r\n    const row = y / this.tileSize;\r\n    const column = x / this.tileSize;\r\n    if (Number.isInteger(row) && Number.isInteger(column)) {\r\n      if (this.gameMap[row][column] === 0) {\r\n        this.gameMap[row][column] = 2;\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  eatPowerDot(x, y) {\r\n    const row = y / this.tileSize;\r\n    const column = x / this.tileSize;\r\n    if (Number.isInteger(row) && Number.isInteger(column)) {\r\n      const tile = this.gameMap[row][column];\r\n      if (tile === 5) {\r\n        this.gameMap[row][column] = 2;\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import TileMap from \"./TileMap.js\";\r\nimport Sound from \"./Sound.js\";\r\n\r\nconst canvas = document.getElementById(\"game-canvas\"),\r\n  ctx = canvas.getContext(\"2d\"),\r\n  GAME_OVER = document.getElementById(\"game-over\"),\r\n  YOU_WON = document.getElementById(\"you-won\"),\r\n  YOU_LOSE = document.getElementById(\"you-lose\"),\r\n  restart = document.getElementById(\"restart\"),\r\n  soundElement = document.getElementById(\"sound\"),\r\n  tileSize = 32,\r\n  speed = 2,\r\n  tileMap = new TileMap(tileSize),\r\n  pacman = tileMap.getPacman(speed),\r\n  ghosts = tileMap.getGhosts(speed);\r\n\r\nlet gameOver = false,\r\n  gameWin = false;\r\n\r\nfunction gameLoop() {\r\n  tileMap.draw(ctx);\r\n  drawGameEnd();\r\n  pacman.draw(ctx, pause(), ghosts);\r\n  ghosts.forEach((ghost) => ghost.draw(ctx, pause(), pacman));\r\n  checkGameOver();\r\n  checkGameWin();\r\n}\r\n\r\nfunction checkGameWin() {\r\n  if (!gameWin) {\r\n    gameWin = tileMap.didWin();\r\n    if (gameWin) {\r\n      Sound.gameWinSound.play();\r\n    }\r\n  }\r\n}\r\n\r\nfunction checkGameOver() {\r\n  if (!gameOver) {\r\n    gameOver = isGameOver();\r\n    if (gameOver) {\r\n      Sound.gameOverSound.play();\r\n    }\r\n  }\r\n}\r\n\r\nfunction isGameOver() {\r\n  return ghosts.some(\r\n    (ghost) => !pacman.powerDotActive && ghost.collideWith(pacman)\r\n  );\r\n}\r\n\r\nfunction pause() {\r\n  return !pacman.madeFirstMove || gameOver || gameWin;\r\n}\r\n\r\nfunction drawGameEnd() {\r\n  if (gameOver || gameWin) {\r\n    showYouWon();\r\n    drawHighScore();\r\n    if (gameOver) {\r\n      showYouLose();\r\n      drawHighScore();\r\n    }\r\n  }\r\n}\r\n\r\ntileMap.setCanvasSize(canvas);\r\nsetInterval(gameLoop, 1000 / 75);\r\n\r\nsoundElement.addEventListener(\"click\", audioManager);\r\n\r\nexport function audioManager() {\r\n  let imgSrc = soundElement.getAttribute(\"src\");\r\n  let SOUND_IMG =\r\n    imgSrc === \"/images/volume-on.png\"\r\n      ? \"/images/volume-mute.png\"\r\n      : \"/images/volume-on.png\";\r\n\r\n  soundElement.setAttribute(\"src\", SOUND_IMG);\r\n  console.log(SOUND_IMG);\r\n  Sound.gameWinSound.muted = Sound.gameWinSound.muted ? false : true;\r\n  Sound.gameOverSound.muted = Sound.gameOverSound.muted ? false : true;\r\n  Sound.eatDotSound.muted = Sound.eatDotSound.muted ? false : true;\r\n  Sound.powerDotSound.muted = Sound.powerDotSound.muted ? false : true;\r\n  Sound.eatGhostSound.muted = Sound.eatGhostSound.muted ? false : true;\r\n}\r\n\r\nrestart.addEventListener(\"click\", function () {\r\n  location.reload();\r\n});\r\n\r\nfunction showYouWon() {\r\n  GAME_OVER.style.display = \"block\";\r\n  YOU_WON.style.display = \"block\";\r\n}\r\n\r\nfunction showYouLose() {\r\n  GAME_OVER.style.display = \"block\";\r\n  YOU_LOSE.style.display = \"block\";\r\n}\r\n\r\nfunction drawHighScore() {\r\n  let highScore = JSON.parse(localStorage.getItem(\"High Score\"));\r\n  let gradient = ctx.createLinearGradient(0, 0, canvas.width / 2, 26);\r\n  gradient.addColorStop(\"0\", \"yellow\");\r\n  gradient.addColorStop(\"1\", \"#f7ae15\");\r\n  ctx.fillStyle = gradient;\r\n  ctx.textAlign = \"center\";\r\n  ctx.font = \"bold 35px 'Fun Games', sans-serif\";\r\n  ctx.fillText(\"HIGHEST SCORE : \" + highScore, canvas.width / 2, 26);\r\n}\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}